# Portfolio

Personal portfolio and blog built with Next.js 16 (App Router), Tailwind CSS, and MDX.

Statically exported (`output: 'export'`) -- no server required at runtime.

## Tech Stack

- **Framework:** Next.js 16 with the App Router
- **Styling:** Tailwind CSS 3 with CSS custom properties for theming (dark mode)
- **UI Components:** Radix UI primitives via shadcn/ui (`components/ui/`)
- **3D:** Three.js via React Three Fiber (DNA helix navigation)
- **Blog:** MDX processed with `next-mdx-remote/rsc`, `gray-matter`, and `reading-time`
- **Code Highlighting:** Shiki through `rehype-pretty-code`
- **Fonts:** IBM Plex Sans (body), Playfair Display (headings), IBM Plex Mono (code)

## Project Structure

```
.
├── app/
│   ├── layout.tsx              # Root layout -- fonts, metadata, global styles
│   ├── page.tsx                # Homepage server component (fetches latest posts)
│   ├── globals.css             # CSS variables, base styles
│   └── blog/
│       ├── layout.tsx          # Blog layout -- sticky header with nav back to portfolio
│       ├── page.tsx            # Blog index -- lists all posts, tag filter
│       ├── [slug]/
│       │   └── page.tsx        # Individual post -- MDX rendering, breadcrumbs, metadata
│       └── tags/
│           └── [tag]/
│               └── page.tsx    # Posts filtered by tag
├── components/
│   ├── home-page-client.tsx    # Client component wrapper for the homepage
│   ├── hero-section.tsx        # Hero / intro section
│   ├── projects-section.tsx    # Projects showcase
│   ├── experience-section.tsx  # Work experience timeline
│   ├── publications-section.tsx # Latest blog posts on homepage (accepts posts prop)
│   ├── photography-section.tsx # Photography gallery
│   ├── contact-section.tsx     # Contact information
│   ├── dna-helix-nav.tsx       # Three.js DNA helix sidebar navigation (desktop)
│   ├── mobile-nav.tsx          # Mobile navigation
│   ├── blog-card.tsx           # Reusable blog post card
│   ├── mdx-components.tsx      # Custom MDX component overrides
│   ├── theme-provider.tsx      # Theme context provider
│   └── ui/                     # shadcn/ui primitives (badge, button, card, etc.)
├── content/
│   └── blog/                   # MDX blog posts live here
│       └── hello-world.mdx
├── hooks/
│   ├── use-active-section.ts   # Intersection Observer for scroll-based section tracking
│   ├── use-mobile.tsx          # Responsive breakpoint hook
│   └── use-toast.ts            # Toast notification hook
├── lib/
│   ├── blog.ts                 # Blog utilities (read/parse/filter MDX posts)
│   └── utils.ts                # General utilities (cn helper)
├── styles/
│   └── globals.css             # Additional global styles
├── public/                     # Static assets (images, favicons)
├── out/                        # Static export output (generated by `next build`)
├── next.config.mjs             # Next.js config -- static export, unoptimized images
├── tailwind.config.ts          # Tailwind config -- custom fonts, colors, animations
├── tsconfig.json
└── package.json
```

## Homepage Architecture

The homepage uses a server-client split:

1. `app/page.tsx` is a **server component** that reads blog posts from the filesystem at build time and passes the latest four to the client.
2. `components/home-page-client.tsx` is a **client component** that renders all homepage sections and manages scroll state.

The DNA helix navigation sidebar is dynamically imported with `ssr: false` since it depends on Three.js and the Canvas API. On mobile, a separate `MobileNav` component is rendered instead.

Sections are tracked via an `IntersectionObserver` in the `useActiveSection` hook, which reports the currently visible section and overall scroll progress to the navigation.

## Blog System

### Content Authoring

Blog posts are MDX files stored in `content/blog/`. Each file requires frontmatter:

```yaml
---
title: "Post Title"
date: "2026-01-15"
excerpt: "A short summary shown on cards and in metadata."
category: "Topic"
tags: ["Tag A", "Tag B"]
published: true
---
```

Setting `published: false` excludes a post from all listings.

The filename (minus `.mdx`) becomes the URL slug. A file named `my-post.mdx` is served at `/blog/my-post`.

### How Posts Are Processed

`lib/blog.ts` provides the core functions:

| Function | Purpose |
|---|---|
| `getAllPosts()` | Reads every `.mdx` file, parses frontmatter with `gray-matter`, computes reading time, filters out unpublished posts, and sorts by date descending. |
| `getPostBySlug(slug)` | Returns a single post's metadata and raw MDX content. |
| `getAllTags()` | Aggregates tags across all published posts with counts. |
| `getPostsByTag(tagSlug)` | Filters posts to those matching a tag (compared via `slugifyTag`). |

All of these run at build time during static generation. There is no runtime server.

### MDX Rendering

Individual post pages (`app/blog/[slug]/page.tsx`) render MDX content using `MDXRemote` from `next-mdx-remote/rsc` with these plugins:

- **remark-gfm** -- GitHub Flavored Markdown (tables, strikethrough, autolinks)
- **rehype-slug** -- adds `id` attributes to headings
- **rehype-autolink-headings** -- wraps headings in anchor links
- **rehype-pretty-code** -- syntax highlighting via Shiki with the `github-dark` theme

Custom component overrides are defined in `components/mdx-components.tsx`, mapping standard HTML elements (headings, paragraphs, code blocks, tables, images, links) to styled React components. A `Callout` component is also available for use within MDX.

### Routes

| Route | Description |
|---|---|
| `/blog` | Index page listing all published posts with tag filter badges |
| `/blog/[slug]` | Individual post with breadcrumbs, metadata header, and rendered MDX |
| `/blog/tags/[tag]` | Posts filtered by a specific tag |

All blog routes use `generateStaticParams` so every page is pre-rendered at build time.

The blog section has its own layout (`app/blog/layout.tsx`) with a sticky header containing links back to the portfolio and blog index, separate from the homepage DNA helix navigation.

### Homepage Integration

The homepage `PublicationsSection` component accepts an optional `posts` prop. The server component in `app/page.tsx` passes the latest four posts. If no posts exist, a placeholder card is shown instead.

## Development

```sh
npm install --legacy-peer-deps
npm run dev
```

The `--legacy-peer-deps` flag is needed due to a peer dependency conflict between `react-day-picker` and `date-fns`.

## Build

```sh
npm run build
```

This produces a fully static site in the `out/` directory, suitable for deployment to any static host.
